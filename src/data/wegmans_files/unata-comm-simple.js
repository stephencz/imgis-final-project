!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var a in n)("object"==typeof exports?exports:t)[a]=n[a]}}(this,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}t.exports=function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}},function(t,e,n){(function(t){t.INSTACART_VERSIONS||(t.INSTACART_VERSIONS={}),t.INSTACART_VERSIONS["@instacart/enterprise-services-unata-comm"]="0.0.3"}).call(this,n(4))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var a,o=n(1),i=n.n(o),r=n(2),u=n.n(r),s=n(0),c=n.n(s);!function(t){t.INSERTSHORTCODE="unata-insert-shortcode",t.CLOSEPLUGIN="unata-close-plugin",t.LOGOUT="unata-logout",t.LOGGEDOUT="unata-logged-out",t.LOGGEDIN="unata-logged-in",t.AUTHENTICATEDUSER="unata-authenticated-user",t.TOGGLEMOBILESIDENAV="unata-toggle-mobile-sidenav",t.UPDATESTORE="unata-update-store",t.GETCONTINUTIYOFFERS="unata-get-continuity-offers",t.CONTINUTIYOFFERS="unata-continuity-offers",t.GETOFFERS="unata-get-offers",t.OFFERS="unata-offers",t.GETPERSONALIZEDOFFERS="unata-get-personalized-offers",t.PERSONALIZEDOFFERS="unata-personalized-offers",t.OFFERSEVENTSREADY="unata-offers-events-ready",t.STORESEVENTSREADY="unata-stores-events-ready",t.SETCATERINGCONTEXT="set-catering-context",t.SHOPPINGCONTEXT="unata-shopping-context",t.GETSHOPPINGCONTEXT="unata-get-shopping-context",t.VIEWSTOREFLYER="view-store-flyer",t.USERUPDATEDSTORE="unata-user-updated-store",t.AVAILABLESTORECONTEXTS="unata-available-store-contexts",t.GETAVAILABLESTORECONTEXTS="unata-get-available-store-contexts",t.GETSTORES="unata-get-stores",t.STORES="unata-stores",t.GETSTORE="unata-get-store",t.STORE="unata-store",t.GETCART="unata-get-cart-data",t.CART="unata-cart-data",t.OPENCONTEXTSELECTOR="unata-open-context-selector",t.HEADERLOADED="unata-header-loaded",t.FOOTERLOADED="unata-footer-loaded",t.OPENLOGINREGISTERMODAL="unata-open-login-register-modal",t.RELOADSESSIONANDGETUSER="unata-reload-session-token-and-get-user",t.GETADDITIONALCONTEXTDETAILS="unata-get-additional-context-details",t.ADDITIONALCONTEXTDETAILS="unata-additional-context-details",t.UNATADEBUGMODE="unata-set-debug-mode",t.ERROR="unata-error",t.GETUSERPROFILE="unata-get-user-profile",t.USERPROFILE="unata-user-profile",t.LOCATIONCHANGE="unata-location-change",t.BROWSEROPENED="unata-browser-opened",t.ACCOUNTMENUACTION="unata-account-menu-action",t.USERLOGGINGIN="unata-user-logging-in",t.USERLOGGINGOUT="unata-user-logging-out",t.MOBILESERVICEREADY="unata-mobile-service-ready"}(a||(a={}));var l="unata-comm-message",E=function(){function t(){var e=this;i()(this,t),c()(this,"debugMode",!1),c()(this,"window",void 0),c()(this,"globalComm",void 0),c()(this,"localComm",void 0),c()(this,"isUnataPostMessage",(function(t){return("null"===t.origin||t.origin===e.window.location.origin)&&(!(!t.data||!t.data.eventType)&&!!/^unata/.test(t.data.eventType.toLowerCase()))})),c()(this,"isCompatibilityPostMessage",(function(t){return t.data&&!!t.data.unataCommCompatibility})),c()(this,"createEvent",(function(t,e){var n;return"function"==typeof Event?n=new Event(t,{cancelable:!1,bubbles:!1}):(n=document.createEvent("Event")).initEvent(t,!1,!1),n.data=e,n})),c()(this,"localDispatch",(function(t){e.localComm.dispatchEvent(e.createEvent(t.eventType,t))})),c()(this,"onGlobalEvent",(function(t){var n=t.data;n&&e.localDispatch(n)})),c()(this,"onPostMessage",(function(t){var n=t;e.isUnataPostMessage(n)&&(e.isCompatibilityPostMessage(n)||(console.warn("[Unata Comm] Legacy Event detected. Please use newer version of UnataComm"),e.localDispatch(n.data)))})),this.globalComm=document,this.window=window,this.localComm=document.createElement("unata-private-comm"),this.globalComm.addEventListener(l,this.onGlobalEvent),this.window.addEventListener("message",this.onPostMessage)}return u()(t,[{key:"getDebugMode",value:function(){return this.debugMode=!0===this.window.DEBUG_UNATA_COMM||"true"===this.window.localStorage.getItem("DEBUG_UNATA_COMM"),this.debugMode}},{key:"send",value:function(t){var e=this;(arguments.length<=1?0:arguments.length-1)>0&&console.warn("[UnataComm] Deprecation Notice: UnataComm will no longer support sendMessageToParent & windowURL"),this.debugMode&&console.debug("Unata Comm Debug:",t),Promise.resolve().then((function(){e.globalComm.dispatchEvent(e.createEvent(l,t))}));try{var n=t;n.unataCommCompatibility=!0,this.window.postMessage(n,"*")}catch(t){}}},{key:"listen",value:function(t,e){this.localComm.addEventListener(t,e)}}]),t}();n(3),n.d(e,"UnataComm",(function(){return d})),n.d(e,"EventType",(function(){return f}));var d=E,f=a}])}));
//# sourceMappingURL=unata-comm-simple.js.map